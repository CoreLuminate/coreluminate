---
import { ArrowRight } from "@lucide/astro";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"work">;
  showStats?: boolean;
}

const { project, showStats = true } = Astro.props;
---

<a
  href={`/work/${project.slug}`}
  class="group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 flex flex-col h-full">
  <!-- Project Image -->
  <div class="relative aspect-4/3 overflow-hidden bg-slate-100">
    <Image
      src={project.data.featuredImage}
      alt={project.data.title}
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
      widths={[400, 600, 800]}
      sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
      quality={80}
    />
    <!-- Overlay on hover -->
    <div
      class="absolute inset-0 bg-blue-900/80 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
      <span class="text-white font-semibold flex items-center gap-2">
        View Project
        <ArrowRight class="w-5 h-5" />
      </span>
    </div>
  </div>

  <!-- Project Info - Flex column with flex-grow -->
  <div class="p-6 flex flex-col grow">
    <!-- Top Content -->
    <div class="grow">
      <div class="flex flex-wrap items-center gap-2 mb-3">
        {
          project.data.services
            .slice(0, 2)
            .map((service: string) => (
              <span class="text-xs font-medium text-blue-600 bg-blue-50 px-3 py-1 rounded-full">
                {service}
              </span>
            ))
        }
      </div>
      <h3
        class="text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors">
        {project.data.title}
      </h3>
      <p class="text-sm text-slate-600 mb-4">
        {project.data.description}
      </p>
    </div>

    <!-- Stats at Bottom -->
    {
      showStats && project.data.stats && project.data.stats.length > 0 && (
        <div class="text-sm font-semibold text-blue-600 mt-auto">
          {project.data.stats[0].value} {project.data.stats[0].label}
        </div>
      )
    }
  </div>
</a>
